!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReduxState=e(require("react")):t.ReduxState=e(t.React)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.staty=e.reducer=e.connectState=void 0;var a=r(2),o=n(a),u=r(7),s=n(u),i=r(8),c=n(i);e.connectState=o["default"],e.reducer=s["default"],e.staty=c["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INIT_STATE="REDUX-STATE/INIT_STATE",e.REMOVE_STATE="REDUX-STATE/REMOVE_STATE",e.UPDATE_STATY="REDUX-STATE/UPDATE_STATY"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=r(4),d=a(f),l=r(3),p=n(l),v=r(6),y=r(10),m=n(y),h=r(11),g=n(h),T=r(5),b=n(T),_=function(){return{}},S=function(t){return{stateDispatch:t}},O=function(t,e,r){return c({},r,t,e)},P=function(t){return t.getState().states},E=function(t){return(0,g["default"])(P(t),"Should add statesReducer into the store")},x=function(t,e){var r=function n(r){var a=P(t);if((0,g["default"])(a[e],"Somebody trying get state when component`s already unmount"),"function"==typeof r){var o=function(){var t=a[e].state;return t};return r(n,o,t)}t.dispatch(c({},r,{meta:c({},r.meta,{stateId:e})}))};return r},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,n=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!0,c=function(e,r,n){var a=P(e),o=a[r].state;return t(o,n,e.getState())},f=function(t,r,n){var a=x(t,r);return e(a,n,t.dispatch)};return function(t){var e=function(e){function l(t,e){o(this,l);var r=u(this,Object.getPrototypeOf(l).call(this));return r.state={reduxState:e.store.getState()},r}return s(l,e),i(l,[{key:"getChildContext",value:function(){return a?{stateId:this.state.stateId}:{}}},{key:"componentDidMount",value:function(){var t=this,e=this.context.store;this.unsubscribe=e.subscribe(function(){t.unsubscribe&&t.setState({reduxState:e.getState()})},this.forceUpdate())}},{key:"componentWillMount",value:function(){var t=this.context.store;if(E(t),n){var e=this.props.stateId,r=void 0===e?(0,b["default"])():e;this.setState({stateId:r}),t.dispatch(d.initState(r,n))}else{var r=this.context.stateId;(0,g["default"])(void 0!==r,"Should declare component with reducer"),this.setState({stateId:r})}}},{key:"componentWillUnmount",value:function(){var t=this;this.unsubscribe(),this.unsubscribe=null,n&&!function(){var e=t.state.stateId,r=t.context.store;setTimeout(function(){return r.dispatch(d.removeState(e))},0)}()}},{key:"render",value:function(){var e=this.context.store,n=this.state.stateId,a=c(e,n,this.props),o=f(e,n,this.props),u=r(a,o,this.props);return p["default"].createElement(t,u)}}]),l}(l.Component);return e.childContextTypes={stateId:v.stateIdPropType},e.contextTypes={stateId:v.stateIdPropType,store:v.storePropType},(0,m["default"])(e,t)}};e["default"]=I},function(e,r){e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateStaty=e.removeState=e.initState=void 0;var n=r(1);e.initState=function(t,e){return{type:n.INIT_STATE,payload:{stateId:t,stateReducer:e}}},e.removeState=function(t){return{type:n.REMOVE_STATE,payload:{stateId:t}}},e.updateStaty=function(t){return{type:n.UPDATE_STATY,payload:{state:t}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=0,n=function(){return r++};e["default"]=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stateIdPropType=e.storePropType=void 0;var n=r(3);e.storePropType=n.PropTypes.object,e.stateIdPropType=n.PropTypes.oneOfType([n.PropTypes.number,n.PropTypes.string])},function(t,e,r){"use strict";function n(t,e){var r={};for(var n in t)e.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u=r(1),s=function(t,e){return{stateId:t,state:e(),stateReducer:e}},i={},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments[1];switch(e.type){case u.INIT_STATE:var r=e.payload,c=r.stateId,f=r.stateReducer;return o({},t,a({},c,s(c,f)));case u.REMOVE_STATE:var d=e.payload.stateId,l=n(t,[d]);return l}var p=e.meta&&e.meta.stateId;if(void 0!==p){var v=t[p],l=n(t,[p]),y=v.state,m=n(v,["state"]);return o({},l,a({},p,o({},m,{state:v.stateReducer(y,e)})))}return Object.keys(t).reduce(function(t,r){var u=t[r],s=n(t,[r]),i=u.state,c=n(u,["state"]);return o({},s,a({},r,o({},c,{state:u.stateReducer(i,e)})))},t)};e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),o=r(2),u=n(o),s=r(9),i=n(s),c=function(t){return{state:t}},f=function(t){return{setState:function(e){return t({type:a.UPDATE_STATY,payload:{state:e}})}}},d=function(t){return function(e){return(0,u["default"])(c,f,void 0,(0,i["default"])(t))(e)}};e["default"]=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.type===n.UPDATE_STATY?Object.assign({},e,r.payload.state):e}};e["default"]=a},function(t,e){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};t.exports=function(t,e){for(var a=Object.getOwnPropertyNames(e),o=0;a.length>o;++o)if(!r[a[o]]&&!n[a[o]])try{t[a[o]]=e[a[o]]}catch(u){}return t}},function(t,e,r){"use strict";var n=function(t,e,r,n,a,o,u,s){if(!t){var i;if(void 0===e)i=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,o,u,s],f=0;i=Error(e.replace(/%s/g,function(){return c[f++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}};t.exports=n}])});